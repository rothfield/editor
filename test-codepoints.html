<!DOCTYPE html>
<html>
<head>
    <title>Notation Font - Codepoint Debug</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #f5f5f5; }
        .test { background: white; padding: 15px; margin: 10px 0; border-left: 4px solid #667eea; }
        .error { background: #ffebee; border-left-color: #c62828; color: #c62828; }
        .success { background: #e8f5e9; border-left-color: #2e7d32; color: #2e7d32; }
        table { border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #667eea; color: white; }
    </style>
</head>
<body>
    <h1>Notation Font Codepoint Calculator Debug</h1>

    <div class="test success">
        <strong>Character Order Verification:</strong>
        <pre id="char-order"></pre>
    </div>

    <div class="test">
        <strong>Sample Calculations (Character '1'):</strong>
        <table>
            <thead>
                <tr>
                    <th>Shift</th>
                    <th>Variant</th>
                    <th>Index</th>
                    <th>Formula</th>
                    <th>Codepoint (Decimal)</th>
                    <th>Codepoint (Hex)</th>
                    <th>Char Code</th>
                </tr>
            </thead>
            <tbody id="debug-table"></tbody>
        </table>
    </div>

    <div class="test">
        <strong>All Character Indices:</strong>
        <pre id="all-chars"></pre>
    </div>

    <script>
        const ALL_CHARS = "1234567CDEFGABcdefgabSrRgGmMPdDnNdrmfsltDRMFSLT";
        const PUA_START = 0xE000;

        // Verify character order
        document.getElementById('char-order').textContent = ALL_CHARS;

        // Calculate for '1'
        const testChar = '1';
        const index = ALL_CHARS.indexOf(testChar);

        const variants = [
            { shift: 1, variant: 0, label: '1 dot above' },
            { shift: 2, variant: 1, label: '2 dots above' },
            { shift: -1, variant: 2, label: '1 dot below' },
            { shift: -2, variant: 3, label: '2 dots below' }
        ];

        const tbody = document.getElementById('debug-table');
        variants.forEach(v => {
            const cp = PUA_START + (index * 4) + v.variant;
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${v.shift}</td>
                <td>${v.variant}</td>
                <td>${index}</td>
                <td>0xE000 + (${index} * 4) + ${v.variant}</td>
                <td>${cp}</td>
                <td>0x${cp.toString(16).toUpperCase()}</td>
                <td>${cp}</td>
            `;
            tbody.appendChild(row);
        });

        // Show all character indices
        let charList = '';
        for (let i = 0; i < ALL_CHARS.length; i++) {
            charList += `${i.toString().padStart(2, '0')}: '${ALL_CHARS[i]}'  `;
            if ((i + 1) % 6 === 0) charList += '\n';
        }
        document.getElementById('all-chars').textContent = charList;

        // Log to console
        console.log('ALL_CHARS:', ALL_CHARS);
        console.log('Character "1" index:', index);
        console.log('Expected codepoints for "1":');
        variants.forEach(v => {
            const cp = PUA_START + (index * 4) + v.variant;
            console.log(`  Shift ${v.shift}: 0x${cp.toString(16).toUpperCase()} (${cp})`);
        });
    </script>
</body>
</html>
