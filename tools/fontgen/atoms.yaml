# Notation Atoms - Canonical definition of all supported notation systems
# This file is the single source of truth for:
# - Which notation systems are supported
# - What characters/syllables exist in each system
# - Character ordering (CRITICAL: must match everywhere)
# - Noto Music font source configuration
#
# The font generator reads this file to determine:
# - How many base characters to create (notes from Noto Music)
# - How to assign codepoints in the Private Use Area (PUA)
# - Which musical glyphs to extract from Noto Music (accidentals, symbols)
# - The JSON mapping file structure
#
# Generated from atoms.yaml by build.rs at compile time for Rust constants

notation_systems:
  # Number System: 1-7 (default in editor)
  # Usage: "1" means first scale degree, "2" means second, etc.
  # NOTE: Accidentals are now fully implemented as pre-composed glyphs in PUA ranges
  - system_name: number
    pua_base: 0xE000  # 7 chars √ó 30 variants = 210 glyphs (0xE000-0xE0D1)
    display_name: "Number System"
    description: "Numerical scale degrees (1-7)"
    characters:
      - char: "1"
        label: "1 (first degree)"
        accidentals: []  # v1.0: DEFERRED - accidentals not yet implemented
      - char: "2"
        label: "2 (second degree)"
        accidentals: []
      - char: "3"
        label: "3 (third degree)"
        accidentals: []
      - char: "4"
        label: "4 (fourth degree)"
        accidentals: []
      - char: "5"
        label: "5 (fifth degree)"
        accidentals: []
      - char: "6"
        label: "6 (sixth degree)"
        accidentals: []
      - char: "7"
        label: "7 (seventh degree)"
        accidentals: []

  # Western System: CDEFGAB (uppercase only)
  # Octaves indicated by dots above/below, not by case
  - system_name: western
    pua_base: 0xE100  # 7 chars √ó 30 variants = 210 glyphs (0xE100-0xE1D1)
    display_name: "Western Letter Names"
    description: "Standard CDEFGAB notation"
    characters:
      - char: "C"
        label: "C"
        accidentals: []
      - char: "D"
        label: "D"
        accidentals: []
      - char: "E"
        label: "E"
        accidentals: []
      - char: "F"
        label: "F"
        accidentals: []
      - char: "G"
        label: "G"
        accidentals: []
      - char: "A"
        label: "A"
        accidentals: []
      - char: "B"
        label: "B"
        accidentals: []

  # Sargam System: Indian classical notation
  # Usage: S=Sa, r=re(lower), R=Re(upper), g=ga(lower), G=Ga(upper), etc.
  - system_name: sargam
    pua_base: 0xE300  # 12 chars √ó 30 variants = 360 glyphs (0xE300-0xE467)
    display_name: "Sargam (Indian Classical)"
    description: "Indian classical music notation (Sa Re Ga Ma Pa Dha Ni)"
    characters:
      - char: "S"
        label: "S (Sa - root)"
        accidentals: []
      - char: "r"
        label: "r (re - lower)"
        accidentals: []
      - char: "R"
        label: "R (Re - upper)"
        accidentals: []
      - char: "g"
        label: "g (ga - lower)"
        accidentals: []
      - char: "G"
        label: "G (Ga - upper)"
        accidentals: []
      - char: "m"
        label: "m (ma - lower)"
        accidentals: []
      - char: "M"
        label: "M (Ma - upper)"
        accidentals: []
      - char: "P"
        label: "P (Pa - perfect fifth)"
        accidentals: []
      - char: "d"
        label: "d (dha - lower)"
        accidentals: []
      - char: "D"
        label: "D (Dha - upper)"
        accidentals: []
      - char: "n"
        label: "n (ni - lower)"
        accidentals: []
      - char: "N"
        label: "N (Ni - upper)"
        accidentals: []

  # Doremi System: Solf√®ge notation (drmfslt)
  # Octaves indicated by dots above/below, not by case
  - system_name: doremi
    pua_base: 0xE500  # 7 chars √ó 30 variants = 210 glyphs (0xE500-0xE5D1)
    display_name: "Doremi (Solf√®ge)"
    description: "Solf√®ge notation (drmfslt)"
    characters:
      - char: "d"
        label: "d (do)"
        accidentals: []
      - char: "r"
        label: "r (re)"
        accidentals: []
      - char: "m"
        label: "m (mi)"
        accidentals: []
      - char: "f"
        label: "f (fa)"
        accidentals: []
      - char: "s"
        label: "s (sol)"
        accidentals: []
      - char: "l"
        label: "l (la)"
        accidentals: []
      - char: "t"
        label: "t (ti)"
        accidentals: []

# Source Fonts - Dual-font architecture for optimal typography
# Noto Sans: High-quality pitch character glyphs (1-7, A-Z, a-z)
# Noto Music: SMuFL-compliant musical symbols (accidentals, barlines, ornaments)
source_fonts:
  base_font:
    path: "tools/fontgen/sources/NotoSans-Regular.ttf"
    name: "Noto Sans"
    version: "2.x"
    license: "SIL OFL 1.1"
    url: "https://github.com/notofonts/sans"
    purpose: "Base glyphs for pitch characters (1-7, A-Z, a-z) and octave variants"
    expected_size: "~300 KB"
    notes: |
      Provides high-quality typography for:
      - Basic Latin characters (0-9, A-Z, a-z) for pitch notation
      - Period (U+002E) for octave shift dots
      - Professional comprehensive sans-serif design
      - Unicode support for international text

  music_symbols_font:
    path: "tools/fontgen/sources/NotoMusic.ttf"
    name: "Noto Music"
    version: "2.001"
    license: "SIL OFL 1.1"
    url: "https://github.com/notofonts/music"
    purpose: "SMuFL-compliant musical symbols (accidentals, barlines, ornaments)"
    expected_size: "~292 KB"
    notes: |
      Provides professional music notation symbols:
      - SMuFL musical symbols (accidentals, barlines, ornaments)
      - Full SMuFL specification compliance
      - Consistent with industry-standard music fonts

# Glyph Variants - How many dot variants each character gets
# Each base character can have:
# - variant 0: 1 dot above
# - variant 1: 2 dots above
# - variant 2: 1 dot below
# - variant 3: 2 dots below
glyph_variants:
  count_per_character: 30  # 6 accidentals √ó 5 octave variants
  accidental_types: 6      # natural, flat, half-flat, double-flat, sharp, double-sharp
  octave_variants: 5       # 0, -2, -1, +1, +2 (base + dots above/below)
  variant_indices:
    # Natural with octave dots (variants 0-3)
    0: "natural +1 octave (1 dot above)"
    1: "natural +2 octave (2 dots above)"
    2: "natural -1 octave (1 dot below)"
    3: "natural -2 octave (2 dots below)"
    # Sharp with octave dots (variants 4-7)
    4: "sharp +1 octave (1 dot above)"
    5: "sharp +2 octave (2 dots above)"
    6: "sharp -1 octave (1 dot below)"
    7: "sharp -2 octave (2 dots below)"
    # Flat with octave dots (variants 8-11)
    8: "flat +1 octave (1 dot above)"
    9: "flat +2 octave (2 dots above)"
    10: "flat -1 octave (1 dot below)"
    11: "flat -2 octave (2 dots below)"

# =============================================================================
# PUA (Private Use Area) Allocation - CANONICAL SOURCE OF TRUTH
# =============================================================================
# All PUA codepoint assignments are defined here. Both Rust (via build.rs)
# and Python (via fontspec.json) consume this configuration.
#
# ARCHITECTURE: Per-system PUA blocks with 30 variants per character
# Formula: codepoint = system_pua_base + (char_index √ó 30) + variant_index
# Where variant_index = (accidental_type √ó 5) + octave_idx
#   accidental_type: 0=natural, 1=flat, 2=half-flat, 3=double-flat, 4=double-sharp, 5=sharp
#   octave_idx: 0=base, 1=-2, 2=-1, 3=+1, 4=+2
# =============================================================================

pua_allocation:
  # -------------------------------------------------------------------------
  # SECTION 1: Per-system note glyphs (pitch + accidental + octave)
  # Each character gets 30 consecutive codepoints (6 accidentals √ó 5 octaves)
  # -------------------------------------------------------------------------
  note_glyphs:
    number:
      pua_base: 0xE000
      chars: 7
      variants_per_char: 30
      range: "0xE000 - 0xE0D1"  # 7 √ó 30 = 210 glyphs
      example:
        "1 natural oct0": 0xE000  # char_idx=0, variant=0
        "1 sharp oct0": 0xE019    # char_idx=0, variant=25 (sharp=5, oct=0)
        "1 sharp oct+1": 0xE01C   # char_idx=0, variant=28 (sharp=5, oct=3)

    western:
      pua_base: 0xE100
      chars: 14
      variants_per_char: 30
      range: "0xE100 - 0xE2A3"  # 14 √ó 30 = 420 glyphs

    sargam:
      pua_base: 0xE300
      chars: 12
      variants_per_char: 30
      range: "0xE300 - 0xE467"  # 12 √ó 30 = 360 glyphs

    doremi:
      pua_base: 0xE500
      chars: 14
      variants_per_char: 30
      range: "0xE500 - 0xE6A3"  # 14 √ó 30 = 420 glyphs

  # -------------------------------------------------------------------------
  # SECTION 2: Line variants for beat grouping (15 variants per character)
  # Used for underlines, overlines, and combinations
  # Covers ALL ASCII printable characters (0x20-0x7E = 95 chars)
  # -------------------------------------------------------------------------
  line_variants:
    description: "Pre-composed glyphs with underline/overline for beat grouping and slurs"
    line_capable_chars: 95  # All ASCII printable (0x20-0x7E)
    variants_per_char: 15   # 3 underline + 3 overline + 9 combined

    underline_only:
      pua_base: 0xE800
      variants: 3   # middle, left, right
      range: "0xE800 - 0xE91C"  # 95 √ó 3 = 285 glyphs

    overline_only:
      pua_base: 0xE920
      variants: 3   # middle, left, right
      range: "0xE920 - 0xEA3B"  # 95 √ó 3 = 285 glyphs

    combined:
      pua_base: 0xEA40
      variants: 9   # 3 underline √ó 3 overline
      range: "0xEA40 - 0xEDB3"  # 95 √ó 9 = 855 glyphs

  # -------------------------------------------------------------------------
  # SECTION 3: Unified 15-variant line system for PUA note glyphs
  # Each note atom gets 15 line variants: 3 underline + 3 overline + 9 combined
  # Replaces legacy separate underlined_notes, overlined_notes, combined_line_notes
  # -------------------------------------------------------------------------
  pua_note_line_variants:
    description: "Unified 15-variant line system for all PUA note glyphs"
    variants_per_note: 15  # 3 underline + 3 overline + 9 combined

    # Variant indices (matches ASCII line_variants):
    #   0-2: underline-only (middle, left, right)
    #   3-5: overline-only (middle, left, right)
    #   6-14: combined (3 underline √ó 3 overline)

    # Formula: line_cp = system_line_base + (note_offset √ó 15) + variant_index
    # where note_offset = original_codepoint - system_source_base

    number_lines:
      pua_base: 0x1A000
      source_base: 0xE000
      note_count: 210   # 7 chars √ó 30 variants
      line_variants: 15
      range: "0x1A000 - 0x1AC4D"  # 210 √ó 15 = 3,150 glyphs

    western_lines:
      pua_base: 0x1B000
      source_base: 0xE100
      note_count: 210   # 7 chars (CDEFGAB) √ó 30 variants
      line_variants: 15
      range: "0x1B000 - 0x1BC4D"  # 210 √ó 15 = 3,150 glyphs

    sargam_lines:
      pua_base: 0x1D000
      source_base: 0xE300
      note_count: 360   # 12 chars √ó 30 variants
      line_variants: 15
      range: "0x1D000 - 0x1E517"  # 360 √ó 15 = 5,400 glyphs

    doremi_lines:
      pua_base: 0x1F000
      source_base: 0xE500
      note_count: 210   # 7 chars (drmfslt) √ó 30 variants
      line_variants: 15
      range: "0x1F000 - 0x1FC4D"  # 210 √ó 15 = 3,150 glyphs

    # Total: (210 + 210 + 360 + 210) √ó 15 = 990 √ó 15 = 14,850 glyphs

  # -------------------------------------------------------------------------
  # SECTION 4: Utility glyphs (marks, arcs, combining characters)
  # -------------------------------------------------------------------------
  utility_glyphs:
    loop_arcs:
      description: "Quarter-circle arcs for loop brackets"
      codepoints:
        loop_bottom_left: 0xE704
        loop_bottom_right: 0xE705
        loop_top_left: 0xE706
        loop_top_right: 0xE707

    line_mark_variants:
      description: "Width-class variants for combining underline/overline marks"
      codepoints:
        underline_narrow: 0xE7F0
        underline_medium: 0xE7F1
        underline_wide: 0xE7F2
        overline_narrow: 0xE7F3
        overline_medium: 0xE7F4
        overline_wide: 0xE7F5

    fullwidth_combining:
      description: "Combining marks for fullwidth lines (bracket joining)"
      codepoints:
        combining_fullwidth_overline: 0xE7E0
        combining_fullwidth_underline: 0xE7E1

  # -------------------------------------------------------------------------
  # SECTION 5: Bracket variants (fullwidth lines for seamless joining)
  # NOTE: Moved to 0xF700+ to avoid collision with accidental_line_variants
  # -------------------------------------------------------------------------
  bracket_variants:
    underline_brackets:
      pua_base: 0xF700
      description: "Underline brackets for beat grouping (basic chars)"
      max_glyphs: 512

    overline_brackets:
      pua_base: 0xFA00
      description: "Overline brackets for slur indication (basic chars)"
      max_glyphs: 512

    # Bracket variants for underlined note atoms (0x16000+)
    # These add left/right arc endpoints to already-underlined glyphs
    underlined_note_brackets:
      pua_base: 0x17000
      description: "Bracket endpoints for underlined note variants"
      # Layout: left=0x17000, right=0x17600
      max_glyphs: 2820  # 1410 underlined notes √ó 2 variants

  # -------------------------------------------------------------------------
  # SECTION 6: Superscript variants (50% scaled for grace notes)
  # Uses Supplementary PUA-A (0xF0000+) - NOT 0x18000 which is Tangut!
  # -------------------------------------------------------------------------
  superscript_variants:
    description: "50% scaled superscript glyphs for grace note rendering"
    scale_factor: 0.5
    line_variants: 16  # 0=none, 1-3=underline, 4-6=overline, 7-15=combined

    geometry:
      y_offset: 400              # Position 25% below top of font (font units)
      # Lines use same positions as regular underlines/overlines

    # Line variant encoding (16 variants per source glyph):
    #   0: no lines
    #   1-3: underline only (1=left, 2=middle, 3=right)
    #   4-6: overline only (4=left, 5=middle, 6=right)
    #   7-15: combined (underline_style-1)*3 + (overline_style-1) + 7
    #         7=UL+OL, 8=UL+OM, 9=UL+OR, 10=UM+OL, 11=UM+OM, 12=UM+OR, 13=UR+OL, 14=UR+OM, 15=UR+OR

    # Formula (MUST match generate.py and build.rs):
    # superscript_cp = system_base + (source_offset √ó 16) + line_variant
    # where source_offset = source_codepoint - source_system_base

    ascii_superscripts:
      pua_base: 0xF8000
      source_range: [0x20, 0x7E]  # ASCII printable
      char_count: 95
      range: "0xF8000 - 0xF85EF"  # 95 √ó 16 = 1,520 glyphs

    number_superscripts:
      pua_base: 0xF8600
      source_base: 0xE000
      chars: 7
      variants_per_char: 30
      range: "0xF8600 - 0xF931F"  # 7 √ó 30 √ó 16 = 3,360 glyphs

    western_superscripts:
      pua_base: 0xF9400
      source_base: 0xE100
      chars: 14
      variants_per_char: 30
      range: "0xF9400 - 0xFAE3F"  # 14 √ó 30 √ó 16 = 6,720 glyphs

    sargam_superscripts:
      pua_base: 0xFAF00
      source_base: 0xE300
      chars: 12
      variants_per_char: 30
      range: "0xFAF00 - 0xFC57F"  # 12 √ó 30 √ó 16 = 5,760 glyphs

    doremi_superscripts:
      pua_base: 0xFC600
      source_base: 0xE500
      chars: 14
      variants_per_char: 30
      range: "0xFC600 - 0xFE03F"  # 14 √ó 30 √ó 16 = 6,720 glyphs

# NOTE: Character order is derived from notation_systems by generate.py
# Do not manually maintain character lists here - edit notation_systems instead.

# Geometry Configuration - Knobs for dot and symbol positioning
# CRITICAL: All positioning is configurable, not hardcoded in Python
# Adjust these values to tweak visual appearance without touching generate.py
geometry:
  dots:
    above_gap: 50        # Distance from character bbox top to first dot above
    below_gap: 50        # Distance from character bbox bottom to first dot below
    vertical_step: 100   # Spacing between first and second dot (1-dot vs 2-dot)
    horizontal_center: true  # Always center dots horizontally over character
    base_x_offset_factor: 0.8  # Multiplier for base dot horizontal offset (relative to dot width)

    # Character-specific horizontal adjustments for dot placement
    # Values are multipliers of the character's width
    # Negative = shift dot left, Positive = shift dot right
    char_adjustments:
      "2": -0.10   # Shift dot left by 10% of char width
      "3": -0.17   # Shift dot left by 17% of char width
      "4": 0.04    # Shift dot right by 4% of char width
      "5": -0.17   # Shift dot left by 17% of char width
      "6": -0.17   # Shift dot left by 17% of char width
      "7": -0.04   # Shift dot left by 4% of char width

  symbols:
    # Future: scaling and positioning for Bravura symbols
    accidental_scale: 1.0      # Scale factor for # ‚ô≠ symbols (when accidentals added)
    accidental_x_offset: 50    # Horizontal gap between base note ink and accidental ink (font units)
    accidental_y_offset: 0     # Vertical positioning relative to base note
    barline_scale: 1.0         # Scale factor for barlines
    ornament_scale: 1.0        # Scale factor for mordent/trill/turn

# SMuFL Symbols - Musical articulations and symbols from Noto Music
# These are composited into the final NotationFont.ttf
# Noto Music provides SMuFL-compliant music glyphs
# Reference: https://w3c.github.io/smufl/latest/
#
# Each symbol has:
# - glyph_name: SMuFL glyph name (e.g., "ornamentMordent")
# - label: Human-readable description
# - smufl_codepoint: Unicode codepoint in SMuFL standard (e.g., U+E56D)
# - codepoint_offset: Ordinal position in symbol array (symbols start after all notes)
smufl_symbols:
  # Accidentals (SMuFL PUA range E260-E264)
  # CRITICAL: Use SMuFL names + PUA codepoints, NOT Unicode codepoints
  - glyph_name: "accidentalSharp"
    label: "Sharp (#)"
    smufl_codepoint: 0xE262  # SMuFL U+E262 (PUA)
    codepoint_offset: 0      # First symbol, allocated after 188 notes

  - glyph_name: "accidentalNatural"
    label: "Natural (‚ôÆ)"
    smufl_codepoint: 0xE261  # SMuFL U+E261 (PUA)
    codepoint_offset: 1

  - glyph_name: "accidentalFlat"
    label: "Flat (‚ô≠)"
    smufl_codepoint: 0xE260  # SMuFL U+E260 (PUA)
    codepoint_offset: 2

  - glyph_name: "accidentalDoubleSharp"
    label: "Double sharp (ùÑ™)"
    smufl_codepoint: 0xE263  # SMuFL U+E263 (PUA)
    codepoint_offset: 3

  - glyph_name: "accidentalDoubleFlat"
    label: "Double flat (ùÑ´)"
    smufl_codepoint: 0xE264  # SMuFL U+E264 (PUA)
    codepoint_offset: 4

  # Barlines (Unicode Musical Notation)
  # Use actual Unicode music symbols instead of SMuFL PUA
  - glyph_name: "barlineSingle"
    label: "Barline (single)"
    smufl_codepoint: 0x1D100  # Unicode U+1D100 ùÑÄ
    codepoint_offset: 5

  - glyph_name: "barlineDouble"
    label: "Barline (double)"
    smufl_codepoint: 0x1D101  # Unicode U+1D101 ùÑÅ
    codepoint_offset: 6

  - glyph_name: "barlineRepeatLeft"
    label: "Barline (repeat left)"
    smufl_codepoint: 0x1D106  # Unicode U+1D106 ùÑÜ (Left Repeat)
    codepoint_offset: 7

  - glyph_name: "barlineRepeatRight"
    label: "Barline (repeat right)"
    smufl_codepoint: 0x1D107  # Unicode U+1D107 ùÑá (Right Repeat)
    codepoint_offset: 8

  - glyph_name: "barlineRepeatBoth"
    label: "Barline (repeat both)"
    smufl_codepoint: 0x1D108  # Unicode U+1D108 ùÑà (Begin and End Repeat)
    codepoint_offset: 9

  # Ornaments (SMuFL common ornaments range)
  - glyph_name: "ornamentMordent"
    label: "Mordent"
    smufl_codepoint: 0xE56D  # SMuFL U+E56D
    codepoint_offset: 10

  - glyph_name: "ornamentInvertedMordent"
    label: "Inverted mordent"
    smufl_codepoint: 0xE56E  # SMuFL U+E56E
    codepoint_offset: 11

  - glyph_name: "ornamentTurn"
    label: "Turn"
    smufl_codepoint: 0xE567  # SMuFL U+E567
    codepoint_offset: 12

  - glyph_name: "ornamentTrill"
    label: "Trill"
    smufl_codepoint: 0xE566  # SMuFL U+E566
    codepoint_offset: 13

# Summary Statistics
summary:
  total_systems: 4
  total_base_characters: 47
  total_octave_variant_glyphs: 188  # 47 characters √ó 4 variants each (1 dot above, 2 above, 1 below, 2 below)
  total_accidental_composite_glyphs: 188  # 47 characters √ó 4 accidental types (sharp, flat, double-sharp, double-flat)
  total_smufl_symbols: 18  # Accidentals, barlines, ornaments, brackets
  total_font_glyphs: 394  # 188 octave + 188 accidental + 18 symbols

  pua_allocations:
    octave_variants: "0xE600 - 0xE6BB"    # 188 glyphs (47 chars √ó 4 octave variants)
    sharp_accidentals: "0xE1F0 - 0xE21E"  # 47 glyphs (47 chars with # symbol)
    flat_accidentals: "0xE220 - 0xE24E"   # 47 glyphs (47 chars with ‚ô≠ symbol)
    double_sharp_accidentals: "0xE250 - 0xE27E"  # 47 glyphs (47 chars with ùÑ™ symbol)
    double_flat_accidentals: "0xE280 - 0xE2AE"   # 47 glyphs (47 chars with ùÑ´ symbol)
    smufl_standard: "0xE030-0xE042 (barlines), 0xE260-0xE264 (accidentals), 0xE566-0xE56E (ornaments), 0x1D100-0x1D108 (Unicode Music)"

  notes: |
    - Dual-font architecture: Noto Sans (pitch chars) + Noto Music (musical symbols)
    - Accidentals are now fully implemented as pre-composed glyph composites
    - Each accidental type gets 47 pre-composed glyphs (one per base character)
    - Accidental composites are generated by combining base character with SMuFL accidental symbol
    - SMuFL standard codepoints are used directly (no custom allocation)
    - Font generation from atoms.yaml ensures compile-time consistency (build.rs)
    - Runtime lookup: JavaScript uses PUA ranges; WASM uses get_accidental_glyph_codepoint()

# =============================================================================
# LINE VARIANTS: Underline and Overline Pre-Composed Glyphs
# =============================================================================
# Every glyph gets 15 line variants (uniform system):
# - 3 underline-only (Middle, Left, Right)
# - 3 overline-only (Middle, Left, Right)
# - 9 combined (3 underline √ó 3 overline)
#
# Formula: line_variant_codepoint = line_base + (glyph_offset √ó 15) + variant_index

line_variant_config:
  variants_per_glyph: 15
  layout:
    # Underline only (indices 0-2)
    - index: 0
      underline: middle
      overline: none
    - index: 1
      underline: left
      overline: none
    - index: 2
      underline: right
      overline: none
    # Overline only (indices 3-5)
    - index: 3
      underline: none
      overline: middle
    - index: 4
      underline: none
      overline: left
    - index: 5
      underline: none
      overline: right
    # Combined (indices 6-14): 3 underline √ó 3 overline
    - index: 6
      underline: middle
      overline: middle
    - index: 7
      underline: middle
      overline: left
    - index: 8
      underline: middle
      overline: right
    - index: 9
      underline: left
      overline: middle
    - index: 10
      underline: left
      overline: left
    - index: 11
      underline: left
      overline: right
    - index: 12
      underline: right
      overline: middle
    - index: 13
      underline: right
      overline: left
    - index: 14
      underline: right
      overline: right

# Per-system line variant bases for pitched notes
# Formula: line_codepoint = line_base + (note_offset √ó 15) + variant_index
pitched_note_line_bases:
  number:
    line_base: 0x1A000    # 210 glyphs (1234567 √ó 30) √ó 15 variants = 3,150
  western:
    line_base: 0x1B000    # 210 glyphs (CDEFGAB √ó 30) √ó 15 variants = 3,150
  sargam:
    line_base: 0x1D000    # 360 glyphs (SrRgGmMPdDnN √ó 30) √ó 15 variants = 5,400
  doremi:
    line_base: 0x1F000    # 210 glyphs (drmfslt √ó 30) √ó 15 variants = 3,150

# =============================================================================
# NOTATION ELEMENTS: Non-pitched symbols that appear in notation
# =============================================================================
# All get 15 line variants (same as pitched notes)
# These are converted from ASCII input to PUA glyphs

notation_elements:
  # NOTE: 0xE700-0xE703 reserved for line endpoint caps (generate.py)
  # Notation elements start at 0xE750 to avoid conflict
  dash:
    base: 0xE750
    line_base: 0x1E000
    ascii_input: ["-"]
    description: "Rhythmic placeholder / rest continuation"

  breath_mark:
    base: 0xE751
    line_base: 0x1E00F
    ascii_input: ["'", ","]
    description: "Breath mark / phrasing separator"

  space:
    base: 0xE752
    line_base: 0x1E01E
    ascii_input: [" "]
    description: "Beat separator"

  single_barline:
    base: 0xE753
    line_base: 0x1E02D
    ascii_input: ["|"]
    description: "Single barline"

  double_barline:
    base: 0xE754
    line_base: 0x1E03C
    ascii_input: ["||"]
    description: "Double barline"

  repeat_left:
    base: 0xE755
    line_base: 0x1E04B
    ascii_input: ["|:"]
    description: "Repeat start barline"

  repeat_right:
    base: 0xE756
    line_base: 0x1E05A
    ascii_input: [":|"]
    description: "Repeat end barline"
